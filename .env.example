# ПРИМЕР КОНФИГУРАЦИИ MCP-ATLASSIAN
# -------------------------------------
# Скопируйте этот файл в .env и заполните своими данными.
# - Не используйте двойные кавычки для строковых значений в этом файле, если только само значение не содержит пробелов.

# =============================================
# ОБЯЗАТЕЛЬНЫЕ URL АТЛАССИАН ИНСТАНСОВ
# =============================================
# ОБЯЗАТЕЛЬНО: Замените на URL ваших инстансов Atlassian.
# Пример Cloud: https://your-company.atlassian.net
# Пример Server/DC: https://jira.your-internal-domain.com
JIRA_URL=https://your-company.atlassian.net
# Пример Cloud: https://your-company.atlassian.net/wiki
# Пример Server/DC: https://confluence.your-internal-domain.com
CONFLUENCE_URL=https://your-company.atlassian.net/wiki

# =============================================
# АУТЕНТИФИКАЦИЯ: ВЫБЕРИТЕ ОДИН МЕТОД ДЛЯ КАЖДОГО ПРОДУКТА (Jira/Confluence)
# =============================================
# mcp-atlassian попытается автоматически определить метод аутентификации на основе предоставленных учетных данных.
# Приоритет автоматического определения:
#   1. Username/API Token (Basic Auth) - Рекомендуется для Cloud
#   2. Personal Access Token (если URL указывает на Server/DC и PAT установлен)
#   3. OAuth BYOT (если установлены ATLASSIAN_OAUTH_CLOUD_ID и ATLASSIAN_OAUTH_ACCESS_TOKEN)
#   4. OAuth Standard (если установлены OAuth Client ID/Secret)

# --- МЕТОД 1: API TOKEN (Рекомендуется для Atlassian Cloud) ---
# Получите API токены на: https://id.atlassian.com/manage-profile/security/api-tokens
# Это самый простой и надежный метод аутентификации для Cloud развертываний.
#JIRA_USERNAME=your.email@example.com
#JIRA_API_TOKEN=your_jira_api_token

#CONFLUENCE_USERNAME=your.email@example.com
#CONFLUENCE_API_TOKEN=your_confluence_api_token

# --- МЕТОД 2: PERSONAL ACCESS TOKEN (PAT) (Server / Data Center - Рекомендуется) ---
# Создайте PAT в настройках профиля Jira/Confluence (обычно в разделе "Personal Access Tokens").
#JIRA_PERSONAL_TOKEN=your_jira_personal_access_token

#CONFLUENCE_PERSONAL_TOKEN=your_confluence_personal_access_token

# --- МЕТОД 3: USERNAME/PASSWORD (Server / Data Center - Использует Basic Authentication) ---
#JIRA_USERNAME=your_server_dc_username
#JIRA_API_TOKEN=your_jira_server_dc_password # Для Server/DC Basic Auth, API_TOKEN содержит фактический пароль

#CONFLUENCE_USERNAME=your_server_dc_username
#CONFLUENCE_API_TOKEN=your_confluence_server_dc_password

# --- МЕТОД 4: OAUTH 2.0 (Продвинутый - Только для Atlassian Cloud) ---
# OAuth 2.0 обеспечивает повышенную безопасность, но более сложен в настройке.
# Для большинства пользователей Метод 1 (API Token) проще и достаточен.
# 1. Создайте приложение OAuth 2.0 (3LO) в Atlassian Developer Console:
#    https://developer.atlassian.com/console/myapps/
# 2. Установите Callback/Redirect URI в вашем приложении (например, http://localhost:8080/callback).
# 3. Предоставьте необходимые области видимости (см. ATLASSIAN_OAUTH_SCOPE ниже).
# 4. Запустите 'mcp-atlassian --oauth-setup -v' (или 'uvx mcp-atlassian@latest --oauth-setup -v').
#    Этот мастер проведет вас через авторизацию и предоставит ваш ATLASSIAN_OAUTH_CLOUD_ID.
#    Токены хранятся безопасно (keyring или локальный файл в ~/.mcp-atlassian/).

# Требуется для --oauth-setup и для использования OAuth сервером:
#ATLASSIAN_OAUTH_CLIENT_ID=your_oauth_client_id
#ATLASSIAN_OAUTH_CLIENT_SECRET=your_oauth_client_secret
#ATLASSIAN_OAUTH_REDIRECT_URI=http://localhost:8080/callback # Должен совпадать с redirect URI вашего приложения
#ATLASSIAN_OAUTH_SCOPE=read:jira-work write:jira-work read:jira-user read:confluence-space.summary read:confluence-content.summary read:confluence-content.all write:confluence-content search:confluence read:page:confluence offline_access # ВАЖНО: 'offline_access' необходим для refresh токенов

# Требуется для сервера ПОСЛЕ запуска --oauth-setup (этот ID выводится мастером настройки):
#ATLASSIAN_OAUTH_CLOUD_ID=your_atlassian_cloud_id_from_oauth_setup

# --- МЕТОД 5: BRING YOUR OWN TOKEN (BYOT) OAUTH (Продвинутый - Только для Atlassian Cloud) ---
# Используйте этот метод, когда у вас есть внешне управляемый OAuth access token.
# Это полезно для интеграции с крупными системами (например, MCP Gateway), которые управляют OAuth токенами.
# Обновление токена не будет выполняться - внешняя система отвечает за управление токенами.
#ATLASSIAN_OAUTH_CLOUD_ID=your_atlassian_cloud_id
#ATLASSIAN_OAUTH_ACCESS_TOKEN=your_pre_existing_oauth_access_token

# =============================================
# НАСТРОЙКИ ДЛЯ SERVER/DATA CENTER
# =============================================
# Применимо только если ваш JIRA_URL/CONFLUENCE_URL указывает на инстанс Server/DC (не *.atlassian.net).
# По умолчанию true. Установите false при использовании самоподписанных сертификатов (не рекомендуется для production окружений).
#JIRA_SSL_VERIFY=true
#CONFLUENCE_SSL_VERIFY=true


# =============================================
# ДОПОЛНИТЕЛЬНАЯ КОНФИГУРАЦИЯ
# =============================================

# --- Общие настройки сервера ---
# Режим транспорта для MCP сервера. По умолчанию 'stdio'.
# Варианты: stdio, sse
#TRANSPORT=stdio
# Порт для транспорта 'sse'. По умолчанию 8000.
#PORT=8000
# Хост для транспорта 'sse'. По умолчанию '0.0.0.0'.
#HOST=0.0.0.0

# --- Режим только чтения ---
# Отключает все операции записи (создание, обновление, удаление). По умолчанию false.
#READ_ONLY_MODE=false

# --- Подробность логирования ---
# MCP_VERBOSE=true        # Включает логирование уровня INFO (эквивалентно 'mcp-atlassian -v')
# MCP_VERY_VERBOSE=true   # Включает логирование уровня DEBUG (эквивалентно 'mcp-atlassian -vv')
# MCP_LOGGING_STDOUT=true # Включает логирование в stdout (logging.StreamHandler по умолчанию использует stderr)
# Уровень логирования по умолчанию WARNING (минимальный вывод).

# --- Фильтрация инструментов ---
# Список названий инструментов через запятую для включения. Если не установлено, все инструменты включены
# (с учетом режима только чтения и настроенных сервисов).
# Пример: ENABLED_TOOLS=confluence_search,jira_get_issue
#ENABLED_TOOLS=

# --- Фильтрация контента ---
# Опционально: Список ключей пространств Confluence через запятую для ограничения поиска и других операций.
#CONFLUENCE_SPACES_FILTER=DEV,TEAM,DOC
# Опционально: Список ключей проектов Jira через запятую для ограничения поиска и других операций.
#JIRA_PROJECTS_FILTER=PROJ,DEVOPS

# --- Конфигурация прокси (Продвинутый) ---
# Глобальные настройки прокси (применяются к Jira и Confluence, если не переопределены настройками прокси для конкретного сервиса ниже).
#HTTP_PROXY=http://proxy.example.com:8080
#HTTPS_PROXY=https://user:pass@proxy.example.com:8443 # Учетные данные могут быть включены
#SOCKS_PROXY=socks5://proxy.example.com:1080 # Требуется установка 'requests[socks]'
#NO_PROXY=localhost,127.0.0.1,.internal.example.com # Список хостов/доменов через запятую для обхода прокси

# Настройки прокси для Jira (эти настройки переопределяют глобальные настройки прокси для запросов Jira).
#JIRA_HTTP_PROXY=http://jira-proxy.example.com:8080
#JIRA_HTTPS_PROXY=https://jira-proxy.example.com:8443
#JIRA_SOCKS_PROXY=socks5://jira-proxy.example.com:1080
#JIRA_NO_PROXY=localhost,127.0.0.1,.internal.jira.com

# Настройки прокси для Confluence (эти настройки переопределяют глобальные настройки прокси для запросов Confluence).
#CONFLUENCE_HTTP_PROXY=http://confluence-proxy.example.com:8080
#CONFLUENCE_HTTPS_PROXY=https://confluence-proxy.example.com:8443
#CONFLUENCE_SOCKS_PROXY=socks5://confluence-proxy.example.com:1080
#CONFLUENCE_NO_PROXY=localhost,127.0.0.1,.internal.confluence.com

# --- Пользовательские HTTP заголовки (Продвинутый) ---
# Пользовательские заголовки для Jira.
#JIRA_CUSTOM_HEADERS=X-Jira-Service=mcp-integration,X-Custom-Auth=jira-token,X-Forwarded-User=service-account

# Пользовательские заголовки для Confluence.
#CONFLUENCE_CUSTOM_HEADERS=X-Confluence-Service=mcp-integration,X-Custom-Auth=confluence-token,X-ALB-Token=secret-token

# =============================================
# КОНФИГУРАЦИЯ MATTERMOST БОТА
# =============================================
# Конфигурация для интеграции Mattermost бота

# ОБЯЗАТЕЛЬНО: URL сервера Mattermost
# Пример: https://mattermost.your-company.com
MATTERMOST_URL=https://mattermost.your-company.com

# ОБЯЗАТЕЛЬНО: Токен бота Mattermost
# Создайте учетную запись бота в Mattermost и получите токен
# Настройки → Интеграции → Учетные записи ботов → Добавить учетную запись бота
MATTERMOST_TOKEN=your_mattermost_bot_token

# ОПЦИОНАЛЬНО: Название команды Mattermost (если бот должен быть ограничен конкретной командой)
#MATTERMOST_TEAM=your-team-name

# =============================================
# КОНФИГУРАЦИЯ LLM (LM Studio)
# =============================================
# Конфигурация для локальной LLM (LM Studio с OpenAI-совместимым API)

# ОБЯЗАТЕЛЬНО: URL API LLM
# URL LM Studio по умолчанию: http://localhost:1234/v1
LLM_API_URL=http://localhost:1234/v1

# ОПЦИОНАЛЬНО: API ключ LLM (если требуется вашим LLM сервером)
#LLM_API_KEY=your_llm_api_key

# ОПЦИОНАЛЬНО: Название модели LLM
# По умолчанию: local-model
LLM_MODEL=local-model

# =============================================
# БАЗА ДАННЫХ БОТА И БЕЗОПАСНОСТЬ
# =============================================
# Конфигурация для хранения данных бота

# ОПЦИОНАЛЬНО: Путь к файлу базы данных SQLite
# По умолчанию: bot_data.db (в текущей директории)
#DATABASE_PATH=bot_data.db

# ОПЦИОНАЛЬНО: Ключ шифрования для хранения паролей пользователей
# Если не установлено, ключ будет автоматически сгенерирован и сохранен в файле .encryption_key
# ВНИМАНИЕ: Храните этот ключ в безопасности! Если он будет потерян, зашифрованные пароли не могут быть восстановлены.
#ENCRYPTION_KEY=your_encryption_key_here
